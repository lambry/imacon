!function($){Imacon={init:function(){this.events(),this.placeholder="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADoUlEQVRo3u1ZTWgTURAOIYRSikjooUgpRXoQEREPHkRERELz/x/yhwnB/CAk9NBDERFKTqWIBykSPIlITyIiIj1J6al4EBFPOXiQ4KEUKUVEpNRvJBvfbt4mb3fzV9iBoZvdefNm3vtm5s2rxWKSSSaZZJIR8vl8m16v98RwIBBwyBzweDzHLpfr2O12/2OjzxKzv/v5jAU/0+GAZMBJYK4D7MqNO6s6IHmI39vgzTHhLT0Qco86sUjk9/sva4bQuDmgGULj5kDfIJTNZq0YfB/y38G/kJPfhUKhhWE40BcIweCacjsx9lssFjs1SAf6AqFqtWrF6wNe8YLC/KB3wDCE8vn8lFphwc6siBgTDoedWh3AsUEMQiIxALlPvB3AJNcFDFmE7BH+3tTqRCaTcWDcNSwUxd9n3VkI23lVghGznfVeBkSj0WkK/FbMfI3H41NanWCpUChYuQ6I1IFIJDILo1ewGmu0qiITQva1Igg3jDjQQYOsxNi1O5y4OeoGO+zYOYzLwdF7tFh4TiHTzXV1wGghg0FOTPakUqm0txdBuwBVh5wj8R/I3+LoiGK3ZHHG2oVv25C5oeqA3qNEMBi8RLHBwiOXy9mgd1flNLnKjqeYgHEvRU6iLUceI7BtMgf0QgirPIfxTUWaewiu8VIuZBuY3C6NTyaTE3i3o7UngBMvisWi1RCEgNXTGPuF15HxftNf4FlW9GDIBq/zwvtXkF0kxnNdRaaqG0KJRMKOce+1NCJQ+zOVSk0y0LtIAc2ThXGPGCeXVPQdQse0ZgiVy2UrNde8otZj298oVr/eRVbmgJocbF/WDCGqAXqaesTFA1aPFDsq8ODugFKeukdNEIIRd5WGijLwfFvSk06nHQqD3+JofkViFMx23sfzDPsN9j5lbN0XhhAM8FMO73at0o2Rw8OMUWcVUHgukjiIIL/KFkUhCJVKJRvsXyYY6GWs3nlJH9LnDAsJrQ4w9h6MrCfGvPvMnHtU+CTGYi0xsE2w3yDbZBqq3ZHdSrCZzEAWqo2sqacDncEs9Bs65jsgNMiLLUBD1tBQxdVbyKBvXcKiUBYRudztxZjrg+LESs1OgyP7A9xo8R5Hzw6OMva2A8O8naYegd0FHAdmYcNHNXlO8dpCRvt/EzLsy106wwC7F1gn0LBMUM9LK99lXBMyZbqfkgXTKP7BgTnXcaayWRQERybxLYhFXaPaAH5GmQbvnDgIdsibZJJJJplkmP4C0NWrxL0MRqkAAAAASUVORK5CYII="},events:function(){$("body").on("click",".imacon-preview",this.selectImage),$("body").on("click",".imacon-remove-image",this.removeImage),$(document).on("ready widget-added widget-updated",function(i){Imacon.initSelect($("#widgets-right .imacon-select")),Imacon.initSort($("#widgets-right .imacon-sortable"))})},initSelect:function(i){i.select2({width:"100%",templateResult:function(i){return $(i.element).parent().hasClass("imacon-icon")?$('<span><i class="fa fa-'+i.id+'"></i> '+i.text+"</span>"):i.text}})},initSort:function(i){i.sortable({placeholder:"imacon-sort-gap",stop:function(i,e){var a="",n=$(e.item).parents(".imacon");n.find(".imacon-sortable .imacon-field").each(function(i,e){a+=$(this).data("id")+","}),n.find(".imacon-sort").val(a)}})},selectImage:function(i){i.preventDefault();var e=$(this).parents(".imacon"),a=wp.media({library:{type:"image"},multiple:!1});return a.on("select",function(){var i=a.state().get("selection").toJSON();$.isEmptyObject(i)||Imacon.addImage(e,i[0])}),a.open(),!1},addImage:function(i,e){i.find(".imacon-preview img").attr("src",e.url),i.find(".imacon-image").val(e.id),i.find(".imacon-remove-image").removeClass("hidden")},removeImage:function(){var i=$(this).parents(".imacon");$(this).addClass("hidden"),i.find(".imacon-image").val(0),i.find(".imacon-preview img").attr("src",Imacon.placeholder)}},Imacon.init()}(jQuery);